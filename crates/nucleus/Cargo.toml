[package]
name = "nucleus"
version.workspace = true
edition.workspace = true
rust-version.workspace = true
license.workspace = true
description = "OS-level enforcement of lattice-guard permissions - wraps file, process, and network APIs"
repository = "https://github.com/coproduct-opensource/nucleus"
documentation = "https://docs.rs/nucleus"
readme = "README.md"
keywords = ["ai", "security", "sandbox", "agents", "enforcement"]
categories = ["os", "filesystem", "command-line-utilities"]

[features]
default = []
# Enable async runtime support
async = ["tokio"]

[dependencies]
# Policy layer - the quotient lattice
lattice-guard = { path = "../lattice-guard" }

# Atomic budget tracking
parking_lot = "0.12"

# Monotonic time (not wall clock)
quanta = "0.12"

# Secure path handling
cap-std = "4"          # Capability-based filesystem
cap-tempfile = "4"     # Secure temp files

# Error handling
thiserror = { workspace = true }

# Optional: async support
tokio = { workspace = true, features = ["process", "fs", "io-util"], optional = true }

# Shell parsing for command validation
shell-words = { workspace = true }

[dev-dependencies]
tempfile = { workspace = true }
rust_decimal = { workspace = true }
